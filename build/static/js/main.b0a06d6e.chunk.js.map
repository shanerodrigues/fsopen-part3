{"version":3,"sources":["components/Person.js","services/persons.js","components/Persons.js","components/Filter.js","components/PersonForm.js","components/Notification.js","App.js","index.js"],"names":["Person","person","deleteEntry","name","number","onClick","baseUrl","axios","get","then","data","personObject","post","res","id","delete","put","Persons","persons","filter","setPersons","setMessage","setCondition","toLowerCase","includes","map","window","confirm","personService","n","catch","error","setTimeout","Filter","handleFilter","onChange","PersonForm","addPerson","handleNameChange","handleNumberChange","newName","newNumber","onSubmit","value","type","Notification","message","condition","className","App","useState","setNewName","setNewNumber","setFilter","useEffect","numbers","updatePerson","chosenPerson","find","changedPerson","returnedPerson","checkName","findIndex","element","alert","event","target","preventDefault","concat","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.b0a06d6e.chunk.js","sourcesContent":["import React from \"react\"\r\n\r\nconst Person = ({ person, deleteEntry }) => {\r\n  return (\r\n    <p>\r\n      {person.name} {person.number}\r\n      <button onClick={deleteEntry}>delete</button>\r\n    </p>\r\n  )\r\n}\r\n\r\nexport default Person\r\n","import axios from \"axios\"\r\nconst baseUrl = \"/api/persons\"\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl)\r\n  return request.then((person) => person.data)\r\n}\r\n\r\nconst create = (personObject) => {\r\n  const request = axios.post(baseUrl, personObject)\r\n  return request.then((res) => res.data)\r\n}\r\n\r\nconst remove = (id) => {\r\n  const request = axios.delete(`${baseUrl}/${id}`)\r\n  return request.then((res) => res.data)\r\n}\r\n\r\nconst update = (id, personObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, personObject)\r\n  return request.then((res) => res.data)\r\n}\r\n\r\nexport default { getAll, create, remove, update }\r\n","import React from \"react\"\r\nimport Person from \"./Person\"\r\nimport personService from \"../services/persons\"\r\n\r\nconst Persons = ({ persons, filter, setPersons, setMessage, setCondition }) => {\r\n  const deleteEntry = (person) => {\r\n    if (window.confirm(`Delete ${person.name}?`)) {\r\n      personService\r\n        .remove(person.id)\r\n        .then(() => {\r\n          setPersons(persons.filter((n) => n.id !== person.id))\r\n        })\r\n        .catch((error) => {\r\n          setMessage(\r\n            `Information of ${person.name} has already been removed from the server`\r\n          )\r\n          setCondition(\"failure\")\r\n          setTimeout(() => {\r\n            setMessage(null)\r\n          }, 5000)\r\n          setPersons(persons.filter((n) => n.id !== person.id))\r\n        })\r\n    }\r\n  }\r\n  return persons\r\n    .filter((person) => {\r\n      if (filter == null) {\r\n        return person\r\n      } else {\r\n        return person.name.toLowerCase().includes(filter.toLowerCase())\r\n      }\r\n    })\r\n    .map((person) => {\r\n      return (\r\n        <Person\r\n          key={person.id}\r\n          person={person}\r\n          deleteEntry={() => deleteEntry(person)}\r\n        />\r\n      )\r\n    })\r\n}\r\n\r\nexport default Persons\r\n","import React from \"react\"\r\n\r\nconst Filter = ({ handleFilter }) => {\r\n  return (\r\n    <span>\r\n      filter shown with <input onChange={handleFilter} />\r\n    </span>\r\n  )\r\n}\r\n\r\nexport default Filter\r\n","import React from \"react\"\r\n\r\nconst PersonForm = ({\r\n  addPerson,\r\n  handleNameChange,\r\n  handleNumberChange,\r\n  newName,\r\n  newNumber,\r\n}) => {\r\n  return (\r\n    <form onSubmit={addPerson}>\r\n      <h2>add a new</h2>\r\n      <div>\r\n        name: <input value={newName} onChange={handleNameChange} />\r\n      </div>\r\n      <div>\r\n        number: <input value={newNumber} onChange={handleNumberChange} />\r\n      </div>\r\n      <div>\r\n        <button type=\"submit\">add</button>\r\n      </div>\r\n    </form>\r\n  )\r\n}\r\n\r\nexport default PersonForm\r\n","const Notification = ({ message, condition }) => {\r\n  if (message === null) {\r\n    return null\r\n  }\r\n  if (condition === \"success\") {\r\n    return <div className=\"success\">{message}</div>\r\n  }\r\n  if (condition === \"failure\") {\r\n    return <div className=\"error\">{message}</div>\r\n  }\r\n}\r\n\r\nexport default Notification\r\n","import React, { useState, useEffect } from \"react\"\nimport Persons from \"./components/Persons\"\nimport Filter from \"./components/Filter\"\nimport PersonForm from \"./components/PersonForm\"\nimport personService from \"./services/persons\"\nimport \"./App.css\"\nimport Notification from \"./components/Notification\"\n\n// run json-server\n// json-server --port 3001 --watch db.json\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [newName, setNewName] = useState(\"\")\n  const [newNumber, setNewNumber] = useState(\"\")\n  const [filter, setFilter] = useState(\"\")\n  const [message, setMessage] = useState(null)\n  const [condition, setCondition] = useState(null)\n\n  useEffect(() => {\n    personService.getAll().then((numbers) => setPersons(numbers))\n  }, [])\n\n  const addPerson = (event) => {\n    event.preventDefault()\n    const checker = checkName(newName, newNumber)\n    if (!checker) {\n      const personObject = {\n        name: newName,\n        number: newNumber,\n      }\n      personService.create(personObject).then((newNumber) => {\n        setPersons(persons.concat(newNumber))\n        setNewName(\"\")\n        setNewNumber(\"\")\n      })\n      setMessage(`Added ${newName}`)\n      setCondition(\"success\")\n      setTimeout(() => {\n        setMessage(null)\n      }, 5000)\n    } else {\n      setNewName(\"\")\n      setNewNumber(\"\")\n    }\n  }\n\n  const updatePerson = (name, number) => {\n    const chosenPerson = persons.find((person) => name === person.name)\n    const changedPerson = { ...chosenPerson, number: number }\n\n    personService\n      .update(chosenPerson.id, changedPerson)\n      .then((returnedPerson) => {\n        setPersons(\n          persons.map((person) =>\n            person.id !== chosenPerson.id ? person : returnedPerson\n          )\n        )\n      })\n      .catch((error) => {\n        setMessage(`The person ${newName} was already deleted from server`)\n        setCondition(\"failure\")\n        setTimeout(() => {\n          setMessage(null)\n        }, 5000)\n        setPersons(persons.filter((n) => n.id !== chosenPerson.id))\n      })\n  }\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value)\n  }\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value)\n  }\n\n  const handleFilter = (event) => {\n    setFilter(event.target.value)\n  }\n\n  const checkName = (newName, newNumber) => {\n    const isPresent = (element) => element.name === newName\n    const indexVal = persons.findIndex(isPresent)\n    if (indexVal >= 0) {\n      if (\n        window.confirm(\n          `${newName} is already added to the phonebook, replace the old number with a new one?`\n        )\n      ) {\n        updatePerson(newName, newNumber)\n        return true\n      }\n      return true\n    } else if (newName === \"\") {\n      alert(`Please add a person to the phonebook`)\n      return true\n    }\n    return false\n  }\n\n  return (\n    <div className=\"container\">\n      <h2>Phonebook</h2>\n      <Notification message={message} condition={condition} />\n      <p>\n        <Filter handleFilter={handleFilter} />\n      </p>\n      <PersonForm\n        addPerson={addPerson}\n        handleNameChange={handleNameChange}\n        handleNumberChange={handleNumberChange}\n        newName={newName}\n        newNumber={newNumber}\n      />\n      <h2>Numbers</h2>\n      <div>\n        <Persons\n          persons={persons}\n          filter={filter}\n          setPersons={setPersons}\n          setMessage={setMessage}\n          setCondition={setCondition}\n        />\n      </div>\n    </div>\n  )\n}\n\nexport default App\n","import React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport \"./index.css\"\nimport App from \"./App\"\n\nReactDOM.render(<App />, document.getElementById(\"root\"))\n"],"sourceRoot":""}