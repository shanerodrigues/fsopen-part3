(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{22:function(e,n,t){},42:function(e,n,t){},43:function(e,n,t){"use strict";t.r(n);var c=t(1),r=t(17),o=t.n(r),a=(t(22),t(8)),i=t(3),u=t(0),s=function(e){var n=e.person,t=e.deleteEntry;return Object(u.jsxs)("p",{children:[n.name," ",n.number,Object(u.jsx)("button",{onClick:t,children:"delete"})]})},d=t(4),l=t.n(d),f="/api/persons",j=function(){return l.a.get(f).then((function(e){return e.data}))},b=function(e){return l.a.post(f,e).then((function(e){return e.data}))},h=function(e){return l.a.delete("".concat(f,"/").concat(e)).then((function(e){return e.data}))},m=function(e,n){return l.a.put("".concat(f,"/").concat(e),n).then((function(e){return e.data}))},O=function(e){var n=e.persons,t=e.filter,c=e.setPersons,r=e.setMessage,o=e.setCondition;return n.filter((function(e){return null==t?e:e.name.toLowerCase().includes(t.toLowerCase())})).map((function(e){return Object(u.jsx)(s,{person:e,deleteEntry:function(){return function(e){window.confirm("Delete ".concat(e.name,"?"))&&h(e.id).then((function(){c(n.filter((function(n){return n.id!==e.id})))})).catch((function(t){r("Information of ".concat(e.name," has already been removed from the server")),o("failure"),setTimeout((function(){r(null)}),5e3),c(n.filter((function(n){return n.id!==e.id})))}))}(e)}},e.id)}))},p=function(e){var n=e.handleFilter;return Object(u.jsxs)("span",{children:["filter shown with ",Object(u.jsx)("input",{onChange:n})]})},x=function(e){var n=e.addPerson,t=e.handleNameChange,c=e.handleNumberChange,r=e.newName,o=e.newNumber;return Object(u.jsxs)("form",{onSubmit:n,children:[Object(u.jsx)("h2",{children:"add a new"}),Object(u.jsxs)("div",{children:["name: ",Object(u.jsx)("input",{value:r,onChange:t})]}),Object(u.jsxs)("div",{children:["number: ",Object(u.jsx)("input",{value:o,onChange:c})]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",children:"add"})})]})},v=(t(42),function(e){var n=e.message,t=e.condition;return"success"===t?Object(u.jsx)("div",{className:"success",children:n}):"failure"===t?Object(u.jsx)("div",{className:"error",children:n}):null}),w=function(){var e=Object(c.useState)([]),n=Object(i.a)(e,2),t=n[0],r=n[1],o=Object(c.useState)(""),s=Object(i.a)(o,2),d=s[0],l=s[1],f=Object(c.useState)(""),h=Object(i.a)(f,2),w=h[0],g=h[1],C=Object(c.useState)(""),N=Object(i.a)(C,2),k=N[0],y=N[1],S=Object(c.useState)(null),P=Object(i.a)(S,2),T=P[0],E=P[1],I=Object(c.useState)(null),D=Object(i.a)(I,2),F=D[0],J=D[1];Object(c.useEffect)((function(){j().then((function(e){return r(e)}))}),[]);var L=function(e,n){var c=t.find((function(n){return e===n.name})),o=Object(a.a)(Object(a.a)({},c),{},{number:n});m(c.id,o).then((function(e){r(t.map((function(n){return n.id!==c.id?n:e})))})).catch((function(e){E("The person ".concat(d," was already deleted from server")),J("failure"),setTimeout((function(){E(null),J(null)}),5e3),r(t.filter((function(e){return e.id!==c.id})))}))},M=function(e,n){return t.findIndex((function(n){return n.name===e}))>=0?!window.confirm("".concat(e," is already added to the phonebook, replace the old number with a new one?"))||(L(e,n),!0):""===e&&(alert("Please add a person to the phonebook"),!0)};return Object(u.jsxs)("div",{className:"container",children:[Object(u.jsx)("h2",{children:"Phonebook"}),Object(u.jsx)(v,{message:T,condition:F}),Object(u.jsx)("p",{children:Object(u.jsx)(p,{handleFilter:function(e){y(e.target.value)}})}),Object(u.jsx)(x,{addPerson:function(e){(e.preventDefault(),M(d,w))?(l(""),g("")):b({name:d,number:w}).then((function(e){console.log("third console"),r(t.concat(e)),l(""),g(""),E("Added ".concat(d)),J("success"),setTimeout((function(){E(null),J(null)}),5e3)})).catch((function(e){E(e.response.data.error),J("failure"),setTimeout((function(){E(null),J(null)}),5e3),l(""),g("")}))},handleNameChange:function(e){l(e.target.value)},handleNumberChange:function(e){g(e.target.value)},newName:d,newNumber:w}),Object(u.jsx)("h2",{children:"Numbers"}),Object(u.jsx)("div",{children:Object(u.jsx)(O,{persons:t,filter:k,setPersons:r,setMessage:E,setCondition:J})})]})};o.a.render(Object(u.jsx)(w,{}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.7dcd048a.chunk.js.map